(function(e){"use strict";var t={},n=[],r={get_fb:function(t,n,i,s){s=s===undefined?"https:"+"//graph.facebook.com/"+n+"/photos?limit=1":s;e.ajax({url:s,dataType:"Json",success:function(e){if(e&&e.data&&e.data.length>0){var n=r.parse_fb(e);r[i](t,n);t.show()}else{r.error_handler("Sorry, no results found!!!")}},beforeSend:function(){r.cooltransition(t)},error:function(e){r.error_handler(t,e.responseJSON.error.message)}})},error_handler:function(t,n){e(".err").html("Error while loading new image");console.log(n);t.show()},parse_fb:function(e){var t,n=e.data[0],r=e.paging&&e.paging.next?e.paging.next:undefined,i=e.paging&&e.paging.previous?e.paging.previous:undefined;t={pic:n.source,likes:n.likes&&n.likes.data?n.likes.data:undefined,name:n.name||"undifined"?n.name:undefined};return{imgs:t,paging:{before:i,next:r}}},cooltransition:function(e){e.hide()},construct:function(n,i){var s=e(n),o=e("<div class='bigPic'>"),u=i.imgs;t=i.paging;o.append("<div class='bp_right_arrow' idx='0'"+(i.paging.next?"":"style='display:none'")+" ><img src='../assets/arrow.png' /></div>");o.append("<div class='bp_left_arrow' style='display:none' idx='0'><img src='../assets/arrow.png'  /></div>");o.append("<div class='bp_title'><div class='bp_name'>"+u.name+"</div><div class='bp_like'>likes "+u.likes.length+"</div></div>");o.append(e("<img class='bigPic_img' src='"+u.pic+"' style='width:"+s.width()+"' /></div>"));o.append(e(".err",s));s.html(o);r.bindButtons(s)},bp_arrows:function(e,n){if(t[n]){r.get_fb(e,"","addIconsAndBigPic",t[n])}},bindButtons:function(t){e(".bp_right_arrow",t).click(function(e){e.preventDefault();t.trigger("bp_next",t)});e(".bp_left_arrow",t).click(function(e){e.preventDefault();t.trigger("bp_before",t)})},addIconsAndBigPic:function(n,r){var i=r.imgs;t=r.paging;e(".bigPic_img",n).attr("src",i.pic);if(t.next){e(".bp_right_arrow",n).show()}else{e(".bp_right_arrow",n).hide()}if(t.before){e(".bp_left_arrow",n).show()}else{e(".bp_left_arrow",n).hide()}}},i={init:function(t){var n=e.extend({size:1},t);var i=e(this);i.append(e("<div class='err'/></div>"));if(!(n.albumId&&n.size)||typeof n.size!=="number"&&n.size%1!=0){e(".err",i).html("Options error")}return this.each(function(){i.bind({bp_next:function(){r.bp_arrows(e(this),"next",1)},bp_before:function(){r.bp_arrows(e(this),"before")}});r.get_fb(i,n.albumId,"construct")})},destroy:function(){e(this).html(" ")}};e.fn.fb_gallery=function(t){if(i[t]){return i[t].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof t==="object"||!t){return i.init.apply(this,arguments)}else{e.error("Method "+t+" does not exist on jQuery.galeria")}}})(jQuery)